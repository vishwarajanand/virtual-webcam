<html>

<head>
  <title>Virtual Webcam Demo Website</title>
  <script type="module">
    import { monkeyPatchMediaDevices } from './js/media-devices.js';

    monkeyPatchMediaDevices();

    async function init() {
      const res = await navigator.mediaDevices.enumerateDevices();
      console.log(res);
      const stream = await navigator.mediaDevices.getUserMedia({ video: { deviceId: 'virtual' }, audio: false });
      const video = document.createElement('video');
      video.id = "video";
      video.srcObject = stream;
      video.autoplay = true;
      document.body.append(video);
    }

    init();

    export { init }
  </script>

  <div id="notes">
    <br>
    <b>Notes: </b>
    <br>
    1. Website Hosted on GitHub here:
    <a href="https://github.com/vishwarajanand/virtual-webcam">
      https://github.com/vishwarajanand/virtual-webcam
    </a>
    <br>
    2. This website is based on another project (read credits):
    <a href="https://github.com/spite/virtual-webcam">
      https://github.com/spite/virtual-webcam
    </a>
    <br />
  </div>

</head>

<body>
  <br />
  <br />
  <img src='./icons/icon-16.png' id='extensionImage'>
  <button id='VirtualWebcamExtension_ShowSample' onclick="setUserPrefs(default_value)">Remove Filters (default)</button>
  <button id='VirtualWebcamExtension_ShowBW' onclick="setUserPrefs('shader-bw')">Black and White Filter</button>
  <button id='VirtualWebcamExtension_ShowFlicker' onclick="setUserPrefs('shader-flicker')">Flicker Filter</button>
  <!-- To be used only in popup js -->
  <script src="js/settings.js"></script>
  <br />
  <br />
</body>

</html>